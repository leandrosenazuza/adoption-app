<div class="animals-container">
  <div class="animals-grid" *ngIf="animals && animals.length > 0">
    <mat-card class="animal-card" *ngFor="let animal of animals">
      <div class="card-image-container">
        <img *ngIf="animal.foto && !imageError[animal.id]" 
             [src]="getImageUrl(animal.foto)" 
             [alt]="animal.nome" 
             class="animal-image" 
             (error)="onImageError(animal.id, $event)"
             loading="lazy">
        <div *ngIf="!animal.foto || imageError[animal.id]" class="no-image">
          <mat-icon>pets</mat-icon>
        </div>
      </div>
      <mat-card-header>
        <mat-card-title>{{animal.nome}}</mat-card-title>
        <mat-card-subtitle>{{animal.idade}} anos</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="animal-info">
          <p *ngIf="animal.descricaoAnimal" class="description">{{animal.descricaoAnimal}}</p>
          <div class="badges" *ngIf="animal.isCastrado || animal.isVermifugado || animal.isVacinado">
            <span *ngIf="animal.isCastrado" class="badge badge-success">Castrado</span>
            <span *ngIf="animal.isVermifugado" class="badge badge-info">Vermifugado</span>
            <span *ngIf="animal.isVacinado" class="badge badge-primary">Vacinado</span>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" routerLink="/animals/update/{{animal.id}}" class="edit-button">
          <mat-icon>edit</mat-icon>
          Editar
        </button>
        <button mat-button color="warn" routerLink="/animals/delete/{{animal.id}}">
          <mat-icon>delete</mat-icon>
          Excluir
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
  <div *ngIf="!animals || animals.length === 0" class="no-animals">
    <p>Nenhum animal cadastrado ainda.</p>
  </div>
</div>
